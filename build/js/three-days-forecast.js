var s=(y,t,e)=>new Promise((o,n)=>{var i=r=>{try{a(e.next(r))}catch(m){n(m)}},c=r=>{try{a(e.throw(r))}catch(m){n(m)}},a=r=>r.done?o(r.value):Promise.resolve(r.value).then(i,c);a((e=e.apply(y,t)).next())});import{getDayOfTheWeek as d,renderListWithTemplate as l}from"./utils.js";export default class g{constructor(t,e){this.listElement=t,this.forecastData=e}init(t){return s(this,null,function*(){this.getList(t)})}getList(t){return s(this,null,function*(){const e=yield this.forecastData.fetchWeatherData(t,"forecast");let o=e.list[0],n=e.list[8],i=e.list[16],c=e.list[24],a=[o,n,i,c];for(let r=0;r<a.length;r++)a[r].dayName=d(a[r]);a.cityName=e.city.name,a.imageName=a.cityName.replace(/[^\w\s]/gi,"").split(" ").join(""),this.renderForecastList(a)})}prepareSecondCardTemplate(t,e){return t.querySelector(".city-name").textContent=e.cityName,t.querySelector(".common-image").style.backgroundImage=`url(images/${e.imageName}.jpg)`||"url(images/noImage.jpg)",t.querySelector(".common-temperature").textContent=Math.round(e[0].main.temp)+" \xB0F",t.querySelector(".common-weather").textContent=e[0].weather[0].main,t.querySelector(".common-min-max").textContent=Math.round(e[0].main.temp_min)+" / "+Math.round(e[0].main.temp_max)+" \xB0F",t.querySelector(".img-card-icon1").src="http://openweathermap.org/img/wn/"+e[1].weather[0].icon+"@2x.png",t.querySelector(".forecast-temp1").textContent=e[1].dayName+" - "+Math.round(e[1].main.temp)+"\xB0",t.querySelector(".img-card-icon2").src="http://openweathermap.org/img/wn/"+e[2].weather[0].icon+"@2x.png",t.querySelector(".forecast-temp2").textContent=e[2].dayName+" - "+Math.round(e[2].main.temp)+"\xB0",t.querySelector(".img-card-icon3").src="http://openweathermap.org/img/wn/"+e[3].weather[0].icon+"@2x.png",t.querySelector(".forecast-temp3").textContent=e[3].dayName+" - "+Math.round(e[3].main.temp)+"\xB0",t}renderForecastList(t){this.listElement.innerHTML="";const e=document.getElementById("three-days-forecast-card-template");l(e,this.listElement,[t],this.prepareSecondCardTemplate)}}
